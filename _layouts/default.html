<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }} - {{ site.title }}</title>

  <!-- Meta Description -->
  <meta name="description" content="{% if page.description %}{{ page.description }}{% elsif page.tagline %}{{ page.tagline }} - {{ page.title }} is part of The Intentional Group, Dubai UAE.{% else %}{{ site.description }}{% endif %}">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://intentional.ae{{ page.url }}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{% if page.layout == 'business' %}business.business{% else %}website{% endif %}">
  <meta property="og:url" content="https://intentional.ae{{ page.url }}">
  <meta property="og:title" content="{{ page.title }} - {{ site.title }}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% elsif page.tagline %}{{ page.tagline }}{% else %}{{ site.description }}{% endif %}">
  <meta property="og:image" content="{% if page.hero_image %}{{ page.hero_image }}{% else %}https://intentional.ae/assets/images/intentional-logo.png{% endif %}">
  <meta property="og:locale" content="en_AE">
  <meta property="og:site_name" content="The Intentional Group">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ page.title }} - {{ site.title }}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% elsif page.tagline %}{{ page.tagline }}{% else %}{{ site.description }}{% endif %}">
  <meta name="twitter:image" content="{% if page.hero_image %}{{ page.hero_image }}{% else %}https://intentional.ae/assets/images/intentional-logo.png{% endif %}">

  <!-- Additional SEO Meta -->
  <meta name="robots" content="index, follow">
  <meta name="author" content="The Intentional Group">
  <meta name="geo.region" content="AE-DU">
  <meta name="geo.placename" content="Dubai">

  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  {% seo %}

  <!-- Structured Data -->
  {% include structured-data.html %}

  <!-- Google Analytics -->
  {% include google-analytics.html %}
</head>
<body{% if page.color %} style="--division-color: {{ page.color }};"{% endif %}>
  <!-- Skip to main content link for accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <header class="site-header">
    <nav class="container">
      <a href="{{ '/' | relative_url }}" class="logo">
        <img src="{{ '/assets/images/intentional-logo.png' | relative_url }}" alt="The Intentional Group" class="logo-img">
      </a>

      <!-- Mobile menu toggle -->
      <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <ul class="nav-menu" id="nav-menu">
        <li><a href="{{ '/' | relative_url }}" {% if page.url == '/' %}class="active"{% endif %}>Home</a></li>
        <li><a href="{{ '/businesses/intentional-development/' | relative_url }}" {% if page.url contains 'intentional-development' %}class="active"{% endif %}>Development</a></li>
        <li><a href="{{ '/businesses/intentional-interiors/' | relative_url }}" {% if page.url contains 'intentional-interiors' %}class="active"{% endif %}>Interiors</a></li>
        <li><a href="{{ '/businesses/intentional-education/' | relative_url }}" {% if page.url contains 'intentional-education' %}class="active"{% endif %}>Education</a></li>
        <li><a href="{{ '/businesses/intentional-landscaping/' | relative_url }}" {% if page.url contains 'intentional-landscaping' %}class="active"{% endif %}>Landscaping</a></li>
        <li><a href="{{ '/' | relative_url }}#contact" {% if page.url contains 'contact' %}class="active"{% endif %}>Contact</a></li>
      </ul>
    </nav>
  </header>

  <main{% unless page.url == '/' %} id="main-content"{% endunless %}>
    {{ content }}
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>The Intentional Group</h4>
          <p>Excellence in Development, Interiors, Education and Landscaping</p>
        </div>
        <div class="footer-section">
          <h4>Our Businesses</h4>
          <ul>
            <li><a href="{{ '/businesses/intentional-development/' | relative_url }}">Intentional Development</a></li>
            <li><a href="{{ '/businesses/intentional-interiors/' | relative_url }}">Intentional Interiors</a></li>
            <li><a href="{{ '/businesses/intentional-education/' | relative_url }}">Intentional Education</a></li>
            <li><a href="{{ '/businesses/intentional-landscaping/' | relative_url }}">Intentional Landscaping</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Contact</h4>
          <p>Email: <a href="mailto:info@intentional.ae">info@intentional.ae</a></p>
          <p>Phone: <a href="tel:+97143574846">+971 4 357 4846</a></p>
          <p>P.O. Box 72528 Dubai, UAE</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; {{ 'now' | date: "%Y" }} The Intentional Group. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Mobile menu script -->
  <script>
    (function() {
      const toggle = document.querySelector('.mobile-menu-toggle');
      const menu = document.querySelector('.nav-menu');

      if (toggle && menu) {
        toggle.addEventListener('click', function() {
          const isOpen = menu.classList.toggle('is-open');
          toggle.classList.toggle('is-open');
          toggle.setAttribute('aria-expanded', isOpen);
        });

        // Close menu when clicking a link
        menu.querySelectorAll('a').forEach(function(link) {
          link.addEventListener('click', function() {
            menu.classList.remove('is-open');
            toggle.classList.remove('is-open');
            toggle.setAttribute('aria-expanded', 'false');
          });
        });
      }
    })();
  </script>

  <!-- Gallery with Modal -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const galleries = document.querySelectorAll('.gallery-grid');

      galleries.forEach(function(gallery) {
        const items = gallery.querySelectorAll('.gallery-item');
        const perPage = 4;
        let currentPage = 0;
        const totalPages = Math.ceil(items.length / perPage);

        function showPage(page) {
          currentPage = page;
          const start = page * perPage;
          const end = start + perPage;

          items.forEach(function(item, index) {
            item.style.display = (index >= start && index < end) ? 'block' : 'none';
          });

          // Update pagination controls
          if (prevBtn) prevBtn.disabled = (page === 0);
          if (nextBtn) nextBtn.disabled = (page >= totalPages - 1);
          if (pageCounter) pageCounter.textContent = 'Page ' + (page + 1) + ' of ' + totalPages;
        }

        // Create pagination controls if needed
        var prevBtn, nextBtn, pageCounter;
        if (items.length > perPage) {
          const paginationDiv = document.createElement('div');
          paginationDiv.className = 'gallery-pagination';

          prevBtn = document.createElement('button');
          prevBtn.className = 'btn btn-secondary';
          prevBtn.innerHTML = '&larr; Previous';
          prevBtn.disabled = true;

          pageCounter = document.createElement('span');
          pageCounter.className = 'page-counter';

          nextBtn = document.createElement('button');
          nextBtn.className = 'btn btn-secondary';
          nextBtn.innerHTML = 'Next &rarr;';

          paginationDiv.appendChild(prevBtn);
          paginationDiv.appendChild(pageCounter);
          paginationDiv.appendChild(nextBtn);
          gallery.parentNode.appendChild(paginationDiv);

          prevBtn.addEventListener('click', function() {
            if (currentPage > 0) showPage(currentPage - 1);
          });

          nextBtn.addEventListener('click', function() {
            if (currentPage < totalPages - 1) showPage(currentPage + 1);
          });
        }

        // Show first page
        showPage(0);

        // Create modal for image viewing
        const modal = document.createElement('div');
        modal.className = 'gallery-modal';
        modal.innerHTML = '<div class="modal-content"><button class="modal-close">&times; Close</button><img src="" alt=""><div class="modal-nav"><button class="modal-prev">&larr; Previous</button><span class="modal-counter"></span><button class="modal-next">Next &rarr;</button></div></div>';
        document.body.appendChild(modal);

        const modalImg = modal.querySelector('img');
        const modalClose = modal.querySelector('.modal-close');
        const modalPrev = modal.querySelector('.modal-prev');
        const modalNext = modal.querySelector('.modal-next');
        const modalCounter = modal.querySelector('.modal-counter');
        let currentIndex = 0;
        const allImages = Array.from(items).map(item => item.querySelector('img').src);

        function showImage(index) {
          currentIndex = index;
          modalImg.src = allImages[index];
          modalCounter.textContent = (index + 1) + ' of ' + allImages.length;
          modal.classList.add('active');
          document.body.style.overflow = 'hidden';
        }

        function closeModal() {
          modal.classList.remove('active');
          document.body.style.overflow = '';
        }

        items.forEach(function(item, index) {
          item.style.cursor = 'pointer';
          item.addEventListener('click', function() {
            showImage(index);
          });
        });

        modalClose.addEventListener('click', closeModal);
        modal.addEventListener('click', function(e) {
          if (e.target === modal) closeModal();
        });

        modalPrev.addEventListener('click', function(e) {
          e.stopPropagation();
          showImage((currentIndex - 1 + allImages.length) % allImages.length);
        });

        modalNext.addEventListener('click', function(e) {
          e.stopPropagation();
          showImage((currentIndex + 1) % allImages.length);
        });

        document.addEventListener('keydown', function(e) {
          if (!modal.classList.contains('active')) return;
          if (e.key === 'Escape') closeModal();
          if (e.key === 'ArrowLeft') modalPrev.click();
          if (e.key === 'ArrowRight') modalNext.click();
        });
      });
    });
  </script>

  <!-- TODO: Calendly Integration
       Uncomment and replace YOUR_CALENDLY_URL when ready to enable booking widget
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
  <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
  <script type="text/javascript">
    window.addEventListener('load', function() {
      Calendly.initBadgeWidget({
        url: 'https://calendly.com/YOUR_CALENDLY_URL',
        text: 'Book a Consultation',
        color: '#5d7187',
        textColor: '#ffffff'
      });
    });
  </script>
  -->
</body>
</html>
